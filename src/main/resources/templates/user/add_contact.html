<!DOCTYPE html>
<html
  lang="en"
  th:replace="~{base :: parent(~{::#content},~{::title},~{::script})}"
>
  <head>
    <title>Add Contact</title>
  </head>
  <body>
    <div id="content">
      <!-- sidebar remains unchanged -->

      <div th:if="${loggedInUser}">
        <div data-th-replace="~{user/sidebar :: sidebar}"></div>
      </div>
    
      <div class="sm:pl-64 pt-20 min-h-screen pb-8">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
          <div class="space-y-8">
            <!-- Form Card -->
            <div class="card p-8 bg-white rounded-2xl shadow-xl transition-all duration-300 hover:shadow-2xl dark:bg-gray-800 dark:border dark:border-gray-700">
              <div data-th-replace="message::messagebox"></div>
    
              <div class="mb-8 space-y-2">
                <h1 class="text-3xl font-bold text-gray-800 dark:text-white">Add New Contact</h1>
                <p class="text-gray-500 dark:text-gray-300 text-lg">
                  Store contacts securely in the cloud and manage communication directly through SCM
                </p>
              </div>
    
              <form 
                class="space-y-6"
                data-th-action="@{'/user/contacts/add'}"
                data-th-object="${contactForm}"
                method="post"
                enctype="multipart/form-data"
              >
                <!-- Name Input -->
                <div class="space-y-2">
                  <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">
                    Contact Name
                  </label>
                  <div class="relative">
                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400 dark:text-gray-500">
                      <i class="fa-regular fa-user w-5 h-5"></i>
                    </div>
                    <input
                      data-th-field="*{name}"
                      type="text"
                      class="w-full pl-10 pr-4 py-3 rounded-lg border border-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:focus:ring-blue-600 dark:text-white transition-all"
                      placeholder="John Doe"
                    />
                  </div>
                  <p class="text-red-500 text-sm mt-1 flex items-center gap-1" 
                     data-th-if="${#fields.hasErrors('name')}" 
                     data-th-errors="*{name}">
                    <i class="fa-solid fa-circle-exclamation"></i> Invalid Name
                  </p>
                </div>
    
                <!-- Email Input -->
                <div class="space-y-2">
                  <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">
                    Contact Email
                  </label>
                  <div class="relative">
                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400 dark:text-gray-500">
                      <i class="fa-regular fa-envelope w-5 h-5"></i>
                    </div>
                    <input
                      data-th-field="*{email}"
                      type="email"
                      class="w-full pl-10 pr-4 py-3 rounded-lg border border-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:focus:ring-blue-600 dark:text-white transition-all"
                      placeholder="john@example.com"
                    />
                  </div>
                </div>
    
                <!-- Phone Input -->
                <div class="space-y-2">
                  <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">
                    Contact Phone
                  </label>
                  <div class="relative">
                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400 dark:text-gray-500">
                      <i class="fa-solid fa-phone w-5 h-5"></i>
                    </div>
                    <input
                      data-th-field="*{phoneNumber}"
                      type="tel"
                      class="w-full pl-10 pr-4 py-3 rounded-lg border border-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:focus:ring-blue-600 dark:text-white transition-all"
                      placeholder="+1 234 567 890"
                    />
                  </div>
                </div>
    
                <!-- Address Input -->
                <div class="space-y-2">
                  <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">
                    Contact Address
                  </label>
                  <textarea
                    data-th-field="*{address}"
                    rows="3"
                    class="w-full px-4 py-3 rounded-lg border border-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:focus:ring-blue-600 dark:text-white transition-all"
                    placeholder="123 Main St, City, Country"
                  ></textarea>
                </div>
    
                <!-- Description Input -->
                <div class="space-y-2">
                  <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">
                    Contact Description
                  </label>
                  <textarea
                    data-th-field="*{description}"
                    rows="3"
                    class="w-full px-4 py-3 rounded-lg border border-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:focus:ring-blue-600 dark:text-white transition-all"
                    placeholder="Notes about your contact..."
                  ></textarea>
                </div>
    
                <!-- Website Input -->
                <div class="space-y-2">
                  <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">
                    Website URL
                  </label>
                  <div class="relative">
                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400 dark:text-gray-500">
                      <i class="fa-solid fa-earth-americas w-5 h-5"></i>
                    </div>
                    <input
                      data-th-field="*{websiteLink}"
                      type="text"
                      class="w-full pl-10 pr-4 py-3 rounded-lg border border-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:focus:ring-blue-600 dark:text-white transition-all"
                      placeholder="https://example.com"
                    />
                  </div>
                </div>
    
                <!-- Image Upload -->
                <div class="space-y-4">
                  <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">
                    Contact Photo
                  </label>
                  <div class="flex items-center gap-6">
                    <div class="relative w-32 h-32 rounded-full bg-gray-100 dark:bg-gray-700 border-2 border-dashed border-gray-300 dark:border-gray-600 flex items-center justify-center overflow-hidden">
                      <img class="absolute w-full h-full object-cover" src="" id="uplaod_image_preview" alt="">
                      <div class="text-gray-400 dark:text-gray-500 text-center">
                        <i class="fa-solid fa-camera text-2xl mb-2"></i>
                        <p class="text-xs">Upload Photo</p>
                      </div>
                    </div>
                    <input 
                      id="image_file_input"
                      type="file"
                      class="hidden"
                      data-th-field="*{contactImage}"
                      accept="image/*"
                    >
                    <button 
                      type="button"
                      onclick="document.getElementById('image_file_input').click()"
                      class="px-4 py-2 text-sm font-medium text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors">
                      Choose File
                    </button>
                  </div>
                </div>
    
                <!-- Favorite Checkbox -->
                <div class="flex items-center gap-3 pt-4">
                  <input
                    data-th-field="*{favorite}"
                    type="checkbox"
                    class="w-5 h-5 text-blue-600 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:bg-gray-700"
                    id="favoriteCheckbox"
                  />
                  <label 
                    for="favoriteCheckbox"
                    class="text-sm font-medium text-gray-700 dark:text-gray-300">
                    Mark as Favorite Contact
                  </label>
                </div>
    
                <!-- Form Actions -->
                <div class="flex gap-4 pt-8">
                  <button
                    type="submit"
                    class="px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors flex-1 sm:flex-none"
                  >
                    Save Contact
                  </button>
                  <button
                    type="reset"
                    class="px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-gray-200 rounded-lg font-medium transition-colors"
                  >
                    Clear Form
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <script>
      // Image preview functionality
      document.getElementById('image_file_input').addEventListener('change', function(e) {
        const reader = new FileReader();
        reader.onload = function() {
          document.getElementById('uplaod_image_preview').src = reader.result;
        }
        if(e.target.files[0]) reader.readAsDataURL(e.target.files[0]);
      });
    </script>

    <script data-th-src="@{'/js/admin.js'}"></script>
    <script>
      console.log("this is profile page");
    </script>
  </body>
</html>
